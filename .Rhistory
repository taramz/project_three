'2' = wes_palette('GrandBudapest2')[2]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Bias')
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[1],
'2' = wes_palette('GrandBudapest2')[2]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Bias')
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
geom_point(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[1],
'2' = wes_palette('GrandBudapest2')[2]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Bias')
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
geom_point(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[2],
'2' = wes_palette('GrandBudapest2')[2]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Bias')
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
geom_point(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[2],
'2' = wes_palette('GrandBudapest2')[3]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Bias')
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
geom_point(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[2],
'2' = wes_palette('GrandBudapest2')[4]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Bias')
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
geom_point(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[2],
'2' = wes_palette('GrandBudapest2')[4]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Bias') +
theme_classic()
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
geom_point(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[2],
'2' = wes_palette('GrandBudapest2')[4]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Bias') +
theme_bw()
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
geom_point(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[2],
'2' = wes_palette('GrandBudapest2')[4]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Bias') +
theme_minimal()
library(MASS)
library(gridExtra)
sim_men <- readRDS('sim_results_men_3.rds')
sim_women <- readRDS('sim_results_women_3.rds')
est_men <- mean(scores_male)
sim_men_scores <- sim_men %>%
group_by(cov,thresh) %>%
summarise(brier = mean(brier),
bias = mean(brier - est_men),
MSE = mean((brier - est_men)^2))
est_women <- mean(scores_female)
sim_women_scores <- sim_women %>%
group_by(cov,thresh) %>%
summarise(brier = mean(brier),
bias = mean(brier - est_women),
MSE = mean((brier - est_women)^2))
best_cov_m <- sim_men_scores %>%
group_by(cov) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias),
avg_MSE = mean(MSE))
best_cov_w <- sim_women_scores %>%
group_by(cov) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias),
avg_MSE = mean(MSE))
p1 <- ggplot(best_cov_m) +
geom_line(aes(x = cov, y = avg_bias), col = "black") +
geom_point(aes(x = cov, y = avg_bias), col = "black") +
scale_x_continuous(n.breaks = 10) +
labs(title = 'Average Bias by Covariance (Men)',
x = 'Covariance',
y = 'Average Bias') +
theme_minimal()
p2 <- ggplot(best_cov_w) +
geom_line(aes(x = cov, y = avg_bias), col = "black") +
geom_point(aes(x = cov, y = avg_bias), col = "black") +
scale_x_continuous(n.breaks = 10) +
labs(title = 'Average Bias by Covariance (Women)',
x = 'Covariance',
y = 'Average Bias') +
theme_minimal()
grid.arrange(p1,p2, nrow=2, ncol = 1)
p3 <- ggplot(best_cov_m) +
geom_line(aes(x = cov, y = avg_MSE), col = "black") +
geom_point(aes(x = cov, y = avg_MSE), col = "black") +
scale_x_continuous(n.breaks = 10) +
labs(title = 'Average MSE by Covariance (Men)',
x = 'Covariance',
y = 'Average MSE') +
theme_minimal()
p4 <- ggplot(best_cov_w) +
geom_line(aes(x = cov, y = avg_MSE), col = "black") +
geom_point(aes(x = cov, y = avg_MSE), col = "black") +
scale_x_continuous(n.breaks = 10) +
labs(title = 'Average MSE by Covariance (Women)',
x = 'Covariance',
y = 'Average MSE') +
theme_minimal()
grid.arrange(p3,p4, nrow=2, ncol = 1)
library(wesanderson)
best_thresh_m <- sim_men_scores %>%
group_by(thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias),
avg_MSE = mean(MSE))
best_thresh_w <- sim_women_scores %>%
group_by(thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias),
avg_MSE = mean(MSE))
best_thresh_m$sex = 1
best_thresh_w$sex = 2
best_thresh <- rbind(best_thresh_m, best_thresh_w)
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
geom_point(aes(x = thresh, y = avg_bias, col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[2],
'2' = wes_palette('GrandBudapest2')[4]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Bias') +
theme_minimal()
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = abs(avg_bias), col = as.factor(sex))) +
geom_point(aes(x = thresh, y = abs(avg_bias), col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[2],
'2' = wes_palette('GrandBudapest2')[4]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Bias') +
theme_minimal()
sim_men_scores %>%
group_by(cov, thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias)) %>%
arrange(desc(avg_bias))
sim_men_scores %>%
group_by(cov, thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias)) %>%
arrange(desc(abs(avg_bias)))
sim_men_scores %>%
group_by(cov, thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias)) %>%
arrange(abs(avg_bias))
sim_women_scores %>%
group_by(cov, thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias)) %>%
arrange(abs(avg_bias))
sim_men_scores %>%
group_by(cov, thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias)) %>%
arrange(abs(avg_bias)) %>%
dplyr::select(cov, thresh)
sim_men_scores %>%
group_by(cov, thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias)) %>%
arrange(abs(avg_bias)) %>%
dplyr::select(cov, thresh, avg_bias)
sim_women_scores %>%
group_by(cov, thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias)) %>%
arrange(abs(avg_bias)) %>%
dplyr::select(cov, thresh, avg_bias)
sim_men_scores %>%
group_by(cov, thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias)) %>%
arrange(abs(avg_bias)) %>%
dplyr::select(cov, thresh, avg_bias)
sim_men_scores %>%
group_by(cov, thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias)) %>%
arrange(abs(avg_bias)) %>%
dplyr::select(cov, thresh, avg_brier, avg_bias)
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = abs(avg_MSE), col = as.factor(sex))) +
geom_point(aes(x = thresh, y = abs(avg_MSE), col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[2],
'2' = wes_palette('GrandBudapest2')[4]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Absolute Bias') +
theme_minimal()
sim_men_scores %>%
group_by(cov, thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias)) %>%
arrange(abs(avg_bias)) %>%
dplyr::select(cov, thresh, avg_brier, avg_bias)
best_thresh_m <- sim_men_scores %>%
filter(cov == 1) %>%
group_by(thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias),
avg_MSE = mean(MSE))
best_thresh_w <- sim_women_scores %>%
filter(cov == 5) %>%
group_by(thresh) %>%
summarise(avg_brier = mean(brier),
avg_bias = mean(bias),
avg_MSE = mean(MSE))
best_thresh_m$sex = 1
best_thresh_w$sex = 2
best_thresh <- rbind(best_thresh_m, best_thresh_w)
ggplot(best_thresh) +
geom_line(aes(x = thresh, y = abs(avg_bias), col = as.factor(sex))) +
geom_point(aes(x = thresh, y = abs(avg_bias), col = as.factor(sex))) +
scale_color_manual(values = c('1' = wes_palette('GrandBudapest2')[2],
'2' = wes_palette('GrandBudapest2')[4]),
labels = c('Male', 'Female')) +
labs(title = 'Bias by BP Medication Threshold',
col = 'Sex',
x = 'Threshold',
y = 'Average Absolute Bias') +
theme_minimal()
sim_men_scores %>%
filter(cov == 1 & thresh == 135) %>%
summarise(avg_brier = mean(brier))
sim_men_scores %>%
filter(cov == 1 & thresh == 135) %>%
summarise(avg_brier = mean(brier)) %>%
pull(avg_brier)
sim_women_scores %>%
filter(cov == 5 & thresh == 120) %>%
summarise(avg_brier = mean(brier)) %>%
pull(avg_brier)
brier_scores_sim <- data.frame(brier = c(men_brier, women_brier))
men_brier <- sim_men_scores %>%
filter(cov == 1 & thresh == 135) %>%
summarise(avg_brier = mean(brier)) %>%
pull(avg_brier)
women_brier <- sim_women_scores %>%
filter(cov == 5 & thresh == 120) %>%
summarise(avg_brier = mean(brier)) %>%
pull(avg_brier)
brier_scores_sim <- data.frame(brier = c(men_brier, women_brier))
kbl(brier_scores_sim, booktabs = T, escape = F, caption = 'Brier Scores of Best Simulated Data') %>%
kable_styling(latex_options = 'HOLD_position')
brier_scores_sim <- data.frame(brier = c(men_brier, women_brier))
colnames(brier_scores_sim) <- c('Brier Score')
rownames(brier_scores_sim) <- c('Male', 'Female')
kbl(brier_scores_sim, booktabs = T, escape = F, caption = 'Brier Scores of Best Simulated Data') %>%
kable_styling(latex_options = 'HOLD_position')
saveRDS(diabetes_mod, 'diabetes_mod.rds')
readRDS('diabetes_mod.rds')
diabetes_mod <- readRDS('diabetes_mod.rds')
diabetes_mod <- readRDS('diabetes_mod.rds')
n_m <- 1500
n_w <- 1680
chol_var_m <- mvrnorm(n_m, mu = c(46, 186), Sigma = matrix(c(15^2, 1, 1, 43^2), 2, 2))
chol_var_w <- mvrnorm(n_w, mu = c(56, 201), Sigma = matrix(c(17^2, 5, 5, 41^2), 2, 2))
HDLC_m <- chol_var_m[,1]
TOTCHOL_m <- chol_var_m[,2]
HDLC_w <- chol_var_w[,1]
TOTCHOL_w <- chol_var_w[,2]
SYSBP_m <- rnorm(n_m, 118, 20)
SYSBP_w <- rnorm(n_w, 134, 20)
AGE_m <- round(runif(n_m, 28, 62))
AGE_w <- round(runif(n_w, 28, 62))
BP_MEDS_m <- as.numeric(SYSBP >= 135)
BP_MEDS_w <- as.numeric(SYSBP >= 120)
CURSMOKE_m <- rbinom(n_m, 1, 0.25)
CURSMOKE_n <- rbinom(n_m, 1, 0.19)
SEX_m <- rep(1, n_m)
SEX_w <- rep(2, n_w)
data_m <- data.frame(HDLC = HDLC_m, TOTCHOL = TOTCHOL_m, SYSBP = SYSBP_m, AGE = AGE_m,
BPMEDS = BP_MEDS_m, CURSMOKE = CURSMOKE_m, SEX = SEX_m)
data_m <- data.frame(HDLC = HDLC_m, TOTCHOL = TOTCHOL_m, SYSBP = SYSBP_m, AGE = AGE_m,
BPMEDS = BP_MEDS_m, CURSMOKE = CURSMOKE_m, SEX = SEX_m)
data_w <- data.frame(HDLC = HDLC_w, TOTCHOL = TOTCHOL_w, SYSBP = SYSBP_w, AGE = AGE_w,
BPMEDS = BP_MEDS_w, CURSMOKE = CURSMOKE_w, SEX = SEX_w)
data_w <- data.frame(HDLC = HDLC_w, TOTCHOL = TOTCHOL_w, SYSBP = SYSBP_w, AGE = AGE_w,
BPMEDS = BP_MEDS_w, CURSMOKE = CURSMOKE_w, SEX = SEX_w)
CURSMOKE_w <- rbinom(n_m, 1, 0.19)
data_w <- data.frame(HDLC = HDLC_w, TOTCHOL = TOTCHOL_w, SYSBP = SYSBP_w, AGE = AGE_w,
BPMEDS = BP_MEDS_w, CURSMOKE = CURSMOKE_w, SEX = SEX_w)
diabetes_mod <- readRDS('diabetes_mod.rds')
n_m <- 1500
n_w <- 1680
chol_var_m <- mvrnorm(n_m, mu = c(46, 186), Sigma = matrix(c(15^2, 1, 1, 43^2), 2, 2))
chol_var_w <- mvrnorm(n_w, mu = c(56, 201), Sigma = matrix(c(17^2, 5, 5, 41^2), 2, 2))
HDLC_m <- chol_var_m[,1]
TOTCHOL_m <- chol_var_m[,2]
HDLC_w <- chol_var_w[,1]
TOTCHOL_w <- chol_var_w[,2]
SYSBP_m <- rnorm(n_m, 118, 20)
SYSBP_w <- rnorm(n_w, 134, 20)
AGE_m <- round(runif(n_m, 28, 62))
AGE_w <- round(runif(n_w, 28, 62))
BP_MEDS_m <- as.numeric(SYSBP_m >= 135)
BP_MEDS_w <- as.numeric(SYSBP_w >= 120)
CURSMOKE_m <- rbinom(n_m, 1, 0.25)
CURSMOKE_w <- rbinom(n_m, 1, 0.19)
SEX_m <- rep(1, n_m)
SEX_w <- rep(2, n_w)
data_m <- data.frame(HDLC = HDLC_m, TOTCHOL = TOTCHOL_m, SYSBP = SYSBP_m, AGE = AGE_m,
BPMEDS = BP_MEDS_m, CURSMOKE = CURSMOKE_m, SEX = SEX_m)
data_w <- data.frame(HDLC = HDLC_w, TOTCHOL = TOTCHOL_w, SYSBP = SYSBP_w, AGE = AGE_w,
BPMEDS = BP_MEDS_w, CURSMOKE = CURSMOKE_w, SEX = SEX_w)
diabetes_mod <- readRDS('diabetes_mod.rds')
n_m <- 1500
n_w <- 1680
chol_var_m <- mvrnorm(n_m, mu = c(46, 186), Sigma = matrix(c(15^2, 1, 1, 43^2), 2, 2))
chol_var_w <- mvrnorm(n_w, mu = c(56, 201), Sigma = matrix(c(17^2, 5, 5, 41^2), 2, 2))
HDLC_m <- chol_var_m[,1]
TOTCHOL_m <- chol_var_m[,2]
HDLC_w <- chol_var_w[,1]
TOTCHOL_w <- chol_var_w[,2]
SYSBP_m <- rnorm(n_m, 118, 20)
SYSBP_w <- rnorm(n_w, 134, 20)
AGE_m <- round(runif(n_m, 28, 62))
AGE_w <- round(runif(n_w, 28, 62))
BP_MEDS_m <- as.numeric(SYSBP_m >= 135)
BP_MEDS_w <- as.numeric(SYSBP_w >= 120)
CURSMOKE_m <- rbinom(n_m, 1, 0.25)
CURSMOKE_w <- rbinom(n_w, 1, 0.19)
SEX_m <- rep(1, n_m)
SEX_w <- rep(2, n_w)
data_m <- data.frame(HDLC = HDLC_m, TOTCHOL = TOTCHOL_m, SYSBP = SYSBP_m, AGE = AGE_m,
BPMEDS = BP_MEDS_m, CURSMOKE = CURSMOKE_m, SEX = SEX_m)
data_w <- data.frame(HDLC = HDLC_w, TOTCHOL = TOTCHOL_w, SYSBP = SYSBP_w, AGE = AGE_w,
BPMEDS = BP_MEDS_w, CURSMOKE = CURSMOKE_w, SEX = SEX_w)
x_vars <- model.matrix(CURSMOKE ~ AGE + HDLC + BPMEDS, data = data_m)
probs <- x_vars %*% coef(diabetes_mod)
probs <- exp(probs)/(1 + exp(probs))
data_m$DIABETES <- to_vec(for(i in 1:length(probs)) rbinom(1,1,probs[i]))
x_vars <- model.matrix(CURSMOKE ~ AGE + HDLC + BPMEDS, data = data_w)
probs <- x_vars %*% coef(diabetes_mod)
probs <- exp(probs)/(1 + exp(probs))
data_w$DIABETES <- to_vec(for(i in 1:length(probs)) rbinom(1,1,probs[i]))
data <- rbind(data_m, data_w)
data$CVD <- NA
data$SYSBP_UT <- ifelse(data$BPMEDS == 0, data$SYSBP, 0)
data$SYSBP_T <- ifelse(data$BPMEDS ==1, data$SYSBP, 0)
combined_df <- rbind(framingham_df, data) %>%
mutate(S = case_when(is.na(CVD) ~ 0,
TRUE ~ 1))
colnames(data)
colnames(framingham_df)
framingham_df <- framingham_df %>%
dplyr::select('HDLC', 'TOTCHOL', 'SYSBP', 'AGE', 'BPMEDS', 'CURSMOKE', 'DIABETES', 'CVD', 'SYSBP_UT', 'SYSBP_T')
combined_df <- rbind(framingham_df, data) %>%
mutate(S = case_when(is.na(CVD) ~ 0,
TRUE ~ 1))
colnames(data)
colnames(framingham_df)
framingham_df <- framingham_df %>%
dplyr::select('HDLC', 'TOTCHOL', 'SYSBP', 'AGE', 'BPMEDS', 'CURSMOKE', 'SEX', 'DIABETES', 'CVD', 'SYSBP_UT', 'SYSBP_T')
# Load in packages
library(riskCommunicator)
library(tidyverse)
library(tableone)
# Pre-processing for Framingham data
data("framingham")
# The Framingham data has been used to create models for cardiovascular risk.
# The variable selection and model below are designed to mimic the models used
# in the paper General Cardiovascular Risk Profile for Use in Primary Care
# This paper is available (cvd_risk_profile.pdf) on Canvas.
framingham_df <- framingham %>% dplyr::select(c(CVD, TIMECVD, SEX, TOTCHOL, AGE,
SYSBP, DIABP, CURSMOKE, DIABETES, BPMEDS,
HDLC, BMI))
framingham_df <- na.omit(framingham_df)
#CreateTableOne(data=framingham_df, strata = c("SEX"))
# Get blood pressure based on whether or not on BPMEDS
framingham_df$SYSBP_UT <- ifelse(framingham_df$BPMEDS == 0,
framingham_df$SYSBP, 0)
framingham_df$SYSBP_T <- ifelse(framingham_df$BPMEDS == 1,
framingham_df$SYSBP, 0)
# Looking at risk within 15 years - remove censored data
dim(framingham_df)
framingham_df <- framingham_df %>%
filter(!(CVD == 0 & TIMECVD <= 365*15)) %>%
dplyr::select(-c(TIMECVD))
dim(framingham_df)
# Filter to each sex
framingham_df_men <- framingham_df %>% filter(SEX == 1)
framingham_df_women <- framingham_df %>% filter(SEX == 2)
# Fit models with log transforms for all continuous variables
# Log transforms - data is skewed otherwise
mod_men <- glm(CVD~log(HDLC)+log(TOTCHOL)+log(AGE)+log(SYSBP_UT+1)+
log(SYSBP_T+1)+CURSMOKE+DIABETES,
data= framingham_df_men, family= "binomial")
mod_women <- glm(CVD~log(HDLC)+log(TOTCHOL)+log(AGE)+log(SYSBP_UT+1)+
log(SYSBP_T+1)+CURSMOKE+DIABETES,
data= framingham_df_women, family= "binomial")
framingham_df <- framingham_df %>%
dplyr::select('HDLC', 'TOTCHOL', 'SYSBP', 'AGE', 'BPMEDS', 'CURSMOKE', 'SEX', 'DIABETES', 'CVD', 'SYSBP_UT', 'SYSBP_T')
combined_df <- rbind(framingham_df, data) %>%
mutate(S = case_when(is.na(CVD) ~ 0,
TRUE ~ 1))
weights <- calculate_weights(combined_df %>% select(-CVD))
weights <- calculate_weights(combined_df %>% dplyr::select(-CVD))
combined_df <- cbind(combined_df, weights)
score_male <- brier_score(combined_df, 1)
score_female <- brier_score(combined_df, 2)
brier_scores_sim <- data.frame(brier = c(score_male, score_female))
colnames(brier_scores_sim) <- c('Brier Score')
rownames(brier_scores_sim) <- c('Male', 'Female')
kbl(brier_scores_sim, booktabs = T, escape = F, caption = 'Brier Scores of Best Simulated Data') %>%
kable_styling(latex_options = 'HOLD_position')
data %>%
tbl_summary(include = c(-CVD))
data_m %>%
tbl_summary(include = c(HDLC, TOTCHOL, SYSBP, AGE, BPMEDS, CURSMOKE))
data_m %>%
tbl_summary(include = c(HDLC, TOTCHOL, SYSBP, AGE, BPMEDS, CURSMOKE),
statistic = list(all_continuous() ~ "{mean} ({sd})"))
data_w %>%
tbl_summary(include = c(HDLC, TOTCHOL, SYSBP, AGE, BPMEDS, CURSMOKE),
statistic = list(all_continuous() ~ "{mean} ({sd})"))
data_m %>%
tbl_summary(include = c(HDLC, TOTCHOL, SYSBP, AGE, BPMEDS, CURSMOKE),
statistic = list(all_continuous() ~ "{mean} ({sd})"))
data_w %>%
tbl_summary(include = c(HDLC, TOTCHOL, SYSBP, AGE, BPMEDS, CURSMOKE),
statistic = list(all_continuous() ~ "{mean} ({sd})"))
data_w %>%
tbl_summary(include = c(TOTCHOL, AGE, SYSBP, HDLC, CURSMOKE, BPMEDS, DIABETES),
statistic = list(all_continuous() ~ "{mean} ({sd})"))
data_m %>%
tbl_summary(include = c(TOTCHOL, AGE, SYSBP, HDLC, CURSMOKE, BPMEDS, DIABETES),
statistic = list(all_continuous() ~ "{mean} ({sd})"),
label = c(TOTCHOL ~ 'Total Cholesterol',
AGE ~ 'Age',
SYSBP ~ 'Systolic Blood Pressure',
HDLC ~ 'High Density Lipoprotein Cholesterol (HDLC)',
CURSMOKE ~ 'Current Smoker',
BPMEDS ~ 'Blood Pressure Medication',
DIABETES ~ 'Diabetes'
)) %>%
modify_caption("**Patient Characteristics (Men)**") %>%
as_gt()
data_w %>%
tbl_summary(include = c(TOTCHOL, AGE, SYSBP, HDLC, CURSMOKE, BPMEDS, DIABETES),
statistic = list(all_continuous() ~ "{mean} ({sd})"),
label = c(TOTCHOL ~ 'Total Cholesterol',
AGE ~ 'Age',
SYSBP ~ 'Systolic Blood Pressure',
HDLC ~ 'High Density Lipoprotein Cholesterol (HDLC)',
CURSMOKE ~ 'Current Smoker',
BPMEDS ~ 'Blood Pressure Medication',
DIABETES ~ 'Diabetes'
)) %>%
modify_caption("**Patient Characteristics (Women)**") %>%
as_gt()
0.2 - 0.09
library(kableExtra)
complete_cases <- df_2017[complete.cases(df_2017)),]
complete_cases <- df_2017[complete.cases(df_2017),]
dim(complete_cases)
